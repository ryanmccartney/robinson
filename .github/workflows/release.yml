# .github/workflows/release.yml
name: Release

on: workflow_dispatch

jobs:
    release:
      runs-on: ubuntu-latest
      name: Create Release
      steps:
        - name: Checkout source code
          uses: actions/checkout@v4
        - name: Show contents of directory
          run: ls
        - name: Initialize Git user
          run: |
            git config --global user.email "ryan@mccartney.info"
            git config --global user.name "Release Workflow"
        - name: Log git status
          run: git status
        - name: Install the dependencies
          run: cd ./backend && npm ci
        - name: Run release
          run: cd ./backend && npm run release --ci
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}